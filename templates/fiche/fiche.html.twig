{% extends 'base.html.twig' %}

{% block title %} Une fiche ! {% endblock %}

{% block body %}
    <style>
        .bannierre{
            background: url('{{ asset("images/banniere2.jpg") }}');
            display: flex;
            align-items: center;
            justify-content: center;
            height: 600px;
            background-attachment:fixed;
            background-repeat:no-repeat;
            background-size:cover;
            position: 50% 10%;
        }
        .bloc-right{
           background: url('{{ asset("images/back1.jpg") }}');
           width: 50%;
           height: 100%;
        }
        .bloc2-left{
           background: url('{{ asset("images/back2.jpg") }}');
           width: 50%;
           
           background-position: 45% 20%;
        }
            
    </style>
    <div class ="bannierre"> 
        <h1 class="bannierre-titre"> Consultation de la fiche : {{ fiche.nom}}  </h1>
    </div>

    {% for contenu in fiche.contenus %}
        <div class="container mt-5 mb-5">
            <div class="row">
                <h1>{{ contenu.rubrique }}</h1>
            </div>
            <div class="row">
                <div class="col me-3"><p>{{ contenu.description }}</p></div>
                <div class="col">
                    {% for media in contenu.lesMedias %}
                        {% if media.type == "Image" %}
                            <img src="{{media.lien}}">
                        {% elseif media.type == "Video" %}
                            <iframe width="560" height="315" src="{{ media.lien }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                        {% else %}
                            {{ media.lien }}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
        </div>      
    {% endfor %}

    <div class="container">
        <div class="row">{{ render(controller('App\\Controller\\CommentaireController::AddCommentaire',{'ficheId':fiche.id})) }}</div>
        <hr>
        {% for comm in lesCommentaires %}
            {% if comm.isValid == true %}
            <div class=" table row">
                <div class="col-1"><h6 class="text-center callout-info">{{ comm.user.pseudo }}</h6></div>
                <div class="col-5"><p>  {{ comm.texte }}</p></div>
            </div>
            <div class="row col-1"><a href="#" class="link-secondary">r√©pondre</a></div>
            <hr>
            <br>
            {% endif %}
        {% endfor %}
    </div>
    
{% endblock %}